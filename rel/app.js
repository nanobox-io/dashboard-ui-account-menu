!function t(e,r,a){function n(i,s){if(!r[i]){if(!e[i]){var u="function"==typeof require&&require;if(!s&&u)return u(i,!0);if(o)return o(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var d=r[i]={exports:{}};e[i][0].call(d.exports,function(t){var r=e[i][1][t];return n(r?r:t)},d,d.exports,t,e,r,a)}return r[i].exports}for(var o="function"==typeof require&&require,i=0;i<a.length;i++)n(a[i]);return n}({1:[function(t,e,r){var a,n,o,i=function(t,e){return function(){return t.apply(e,arguments)}};o=t("jade/base"),n=t("sub-menu"),a=function(){function t(t,e){this.config=e,this.addDestroyListener=i(this.addDestroyListener,this),this.parseData(),this.build(t)}return t.prototype.build=function(t){return this.$node=$(o(this.config)),t.append(this.$node),$("#profile-img").on("click",function(t){return function(e){if(null==t.subMenu)return t.buildSubMenu(),setTimeout(t.addDestroyListener,50)}}(this))},t.prototype.buildSubMenu=function(){return this.subMenu=new n(this.$node,this.config)},t.prototype.destroySubMenu=function(){return this.subMenu.destroy(),this.subMenu=null},t.prototype.addDestroyListener=function(){return $(document).on("click",function(t){return function(){return $(document).off("click"),t.destroySubMenu()}}(this))},t.prototype.parseData=function(){return this.config.gravatarHash=md5(this.config.user.email),this.setTeamColors(),this.setCurrentContext()},t.prototype.setCurrentContext=function(){var t,e,r,a,n;for(this.config.currentContext=this.config.user,r=this.config.teams,a=[],t=0,e=r.length;t<e;t++)n=r[t],n.id===this.config.contextId?(n.isTeam=!0,a.push(this.config.currentContext=n)):a.push(void 0);return a},t.prototype.setTeamColors=function(){var t,e,r,a,n,o,i;for(t=["#F07146","#F046A1","#00BACC","#00A42E","#F00000"],e=0,n=this.config.teams,o=[],r=0,a=n.length;r<a;r++)i=n[r],i.color=this.hexToRgb(t[e++],.7),e===t.length?o.push(e=0):o.push(void 0);return o},t.prototype.hexToRgb=function(t,e){var r;return r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t),"rgba("+parseInt(r[1],16)+", "+parseInt(r[2],16)+", "+parseInt(r[3],16)+", "+e+")"},t}(),window.nanobox||(window.nanobox={}),nanobox.AccountMenu=a},{"jade/base":3,"sub-menu":2}],2:[function(t,e,r){var a,n;n=t("jade/sub-menu"),e.exports=a=function(){function t(t,e){this.config=e,this.build(t)}return t.prototype.build=function(t){return this.$node=$(n(this.config)),t.append(this.$node),$("#logout").on("click",function(t){return $.ajax({type:"DELETE",url:t.currentTarget.dataset.logout})})},t.prototype.destroy=function(){return this.$node.remove()},t}()},{"jade/sub-menu":4}],3:[function(t,e,r){e.exports=function(t){var e,r=[],a=t||{};return function(t,a){r.push('<div class="account-menu"><div id="profile-img"><img'+jade.attr("src","https://secure.gravatar.com/avatar/"+a+"?d=retro&r=pg&size=36",!0,!1)+' class="profile"/>'),t.isTeam&&r.push("<div"+jade.attr("style","background-color:"+t.color,!0,!1)+' class="letter">'+jade.escape(null==(e=t.name.charAt(0))?"":e)+"</div>"),r.push('<div class="circ-arrow"></div></div></div>')}.call(this,"currentContext"in a?a.currentContext:"undefined"!=typeof currentContext?currentContext:void 0,"gravatarHash"in a?a.gravatarHash:"undefined"!=typeof gravatarHash?gravatarHash:void 0),r.join("")}},{}],4:[function(t,e,r){e.exports=function(t){var e,r=[],a=t||{};return function(t,a,n,o,i,s,u){r.push('<div class="account-sub-menu"><div class="teams"><a'+jade.attr("href",""+u.appsPath,!0,!1)+jade.cls(["team",t==u.id?"active":""],[null,!0])+"><img"+jade.attr("src","https://secure.gravatar.com/avatar/"+n+"?d=retro&r=pg&size=36",!0,!1)+' class="profile"/><div class="name">'+jade.escape(null==(e=u.username)?"":e)+"</div></a>"),function(){var a=i;if("number"==typeof a.length)for(var o=0,s=a.length;o<s;o++){var u=a[o];r.push("<a"+jade.attr("href",""+u.appsPath,!0,!1)+jade.cls(["team",t==u.id?"active":""],[null,!0])+"><img"+jade.attr("src","https://secure.gravatar.com/avatar/"+n+"?d=retro&r=pg&size=36",!0,!1)+' class="profile"/><div class="name">'+jade.escape(null==(e=u.name)?"":e)+"</div><div"+jade.attr("style","background-color:"+u.color,!0,!1)+' class="letter">'+jade.escape(null==(e=u.name.charAt(0))?"":e)+"</div></a>")}else{var s=0;for(var o in a){s++;var u=a[o];r.push("<a"+jade.attr("href",""+u.appsPath,!0,!1)+jade.cls(["team",t==u.id?"active":""],[null,!0])+"><img"+jade.attr("src","https://secure.gravatar.com/avatar/"+n+"?d=retro&r=pg&size=36",!0,!1)+' class="profile"/><div class="name">'+jade.escape(null==(e=u.name)?"":e)+"</div><div"+jade.attr("style","background-color:"+u.color,!0,!1)+' class="letter">'+jade.escape(null==(e=u.name.charAt(0))?"":e)+"</div></a>")}}}.call(this),r.push('</div><div class="account-admin"><div class="top"><div class="image-box"><img'+jade.attr("src","https://secure.gravatar.com/avatar/"+n+"?d=retro&r=pg&size=36",!0,!1)+' class="profile"/>'),a.isTeam&&r.push("<div"+jade.attr("style","background-color:"+a.color,!0,!1)+' class="letter">'+jade.escape(null==(e=a.name.charAt(0))?"":e)+"</div>"),r.push('</div><div class="actions"><a'+jade.attr("href",""+a.adminPath,!0,!1)+'>Admin</a><a id="logout" href="#"'+jade.attr("data-logout",""+a.adminPath,!0,!1)+">Logout</a></div></div><a"+jade.attr("href",""+o,!0,!1)+' class="new-team">Create a new team</a></div></div>')}.call(this,"contextId"in a?a.contextId:"undefined"!=typeof contextId?contextId:void 0,"currentContext"in a?a.currentContext:"undefined"!=typeof currentContext?currentContext:void 0,"gravatarHash"in a?a.gravatarHash:"undefined"!=typeof gravatarHash?gravatarHash:void 0,"newTeamPath"in a?a.newTeamPath:"undefined"!=typeof newTeamPath?newTeamPath:void 0,"teams"in a?a.teams:"undefined"!=typeof teams?teams:void 0,"undefined"in a?a.undefined:void 0,"user"in a?a.user:"undefined"!=typeof user?user:void 0),r.join("")}},{}]},{},[1]);