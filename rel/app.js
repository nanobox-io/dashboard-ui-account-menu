!function t(e,n,r){function a(i,s){if(!n[i]){if(!e[i]){var u="function"==typeof require&&require;if(!s&&u)return u(i,!0);if(o)return o(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[i]={exports:{}};e[i][0].call(d.exports,function(t){var n=e[i][1][t];return a(n?n:t)},d,d.exports,t,e,n,r)}return n[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)a(r[i]);return a}({1:[function(t,e,n){var r,a,o,i=function(t,e){return function(){return t.apply(e,arguments)}};o=t("jade/base"),a=t("sub-menu"),r=function(){function t(t,e){this.config=e,this.addDestroyListener=i(this.addDestroyListener,this),this.parseData(),this.build(t)}return t.prototype.build=function(t){return this.$node=$(o(this.config)),t.append(this.$node),$("#profile-img").on("click",function(t){return function(e){if(null==t.subMenu)return t.buildSubMenu(),setTimeout(t.addDestroyListener,50)}}(this))},t.prototype.buildSubMenu=function(){return this.subMenu=new a(this.$node,this.config)},t.prototype.destroySubMenu=function(){return this.subMenu.destroy(),this.subMenu=null},t.prototype.addDestroyListener=function(){return $(document).on("click",function(t){return function(){return $(document).off("click"),t.destroySubMenu()}}(this))},t.prototype.parseData=function(){return this.config.gravatarHash=md5(this.config.user.email),this.setTeamColors(),this.setCurrentContext()},t.prototype.setCurrentContext=function(){var t,e,n,r,a;for(this.config.currentContext=this.config.user,n=this.config.teams,r=[],t=0,e=n.length;t<e;t++)a=n[t],a.id===this.config.contextId?(a.isTeam=!0,r.push(this.config.currentContext=a)):r.push(void 0);return r},t.prototype.setTeamColors=function(){var t,e,n,r,a,o,i;for(t=["#F07146","#F046A1","#00BACC","#00A42E","#F00000"],e=0,a=this.config.teams,o=[],n=0,r=a.length;n<r;n++)i=a[n],i.color=this.hexToRgb(t[e++],.7),e===t.length?o.push(e=0):o.push(void 0);return o},t.prototype.hexToRgb=function(t,e){var n;return n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t),"rgba("+parseInt(n[1],16)+", "+parseInt(n[2],16)+", "+parseInt(n[3],16)+", "+e+")"},t}(),window.nanobox||(window.nanobox={}),nanobox.AccountMenu=r},{"jade/base":3,"sub-menu":2}],2:[function(t,e,n){var r,a;a=t("jade/sub-menu"),e.exports=r=function(){function t(t,e){this.config=e,this.build(t)}return t.prototype.build=function(t){return this.$node=$(a(this.config)),t.append(this.$node),$("#logout").on("click",function(t){return function(e){return $.ajax({type:"DELETE",url:t.config.logoutPath,success:function(){return window.location=t.config.loginPath},error:function(){return alert("Logout failed, try again")}})}}(this))},t.prototype.destroy=function(){return this.$node.remove()},t}()},{"jade/sub-menu":4}],3:[function(t,e,n){e.exports=function(t){var e,n=[],r=t||{};return function(t,r){n.push('<div class="account-menu"><div id="profile-img"><img'+jade.attr("src","https://secure.gravatar.com/avatar/"+r+"?d=retro&r=pg&size=36",!0,!1)+' class="profile"/>'),t.isTeam&&n.push("<div"+jade.attr("style","background-color:"+t.color,!0,!1)+' class="letter">'+jade.escape(null==(e=t.name.charAt(0))?"":e)+"</div>"),n.push('<div class="circ-arrow"></div></div></div>')}.call(this,"currentContext"in r?r.currentContext:"undefined"!=typeof currentContext?currentContext:void 0,"gravatarHash"in r?r.gravatarHash:"undefined"!=typeof gravatarHash?gravatarHash:void 0),n.join("")}},{}],4:[function(t,e,n){e.exports=function(t){var e,n=[],r=t||{};return function(t,r,a,o,i,s,u,c){n.push('<div class="account-sub-menu"><div class="teams"><a'+jade.attr("href",""+c.appsPath,!0,!1)+jade.cls(["team",t==c.id?"active":""],[null,!0])+"><img"+jade.attr("src","https://secure.gravatar.com/avatar/"+a+"?d=retro&r=pg&size=36",!0,!1)+' class="profile"/><div class="name">'+jade.escape(null==(e=c.username)?"":e)+"</div></a>"),function(){var r=s;if("number"==typeof r.length)for(var o=0,i=r.length;o<i;o++){var u=r[o];n.push("<a"+jade.attr("href",""+u.appsPath,!0,!1)+jade.cls(["team",t==u.id?"active":""],[null,!0])+"><img"+jade.attr("src","https://secure.gravatar.com/avatar/"+a+"?d=retro&r=pg&size=36",!0,!1)+' class="profile"/><div class="name">'+jade.escape(null==(e=u.name)?"":e)+"</div><div"+jade.attr("style","background-color:"+u.color,!0,!1)+' class="letter">'+jade.escape(null==(e=u.name.charAt(0))?"":e)+"</div></a>")}else{var i=0;for(var o in r){i++;var u=r[o];n.push("<a"+jade.attr("href",""+u.appsPath,!0,!1)+jade.cls(["team",t==u.id?"active":""],[null,!0])+"><img"+jade.attr("src","https://secure.gravatar.com/avatar/"+a+"?d=retro&r=pg&size=36",!0,!1)+' class="profile"/><div class="name">'+jade.escape(null==(e=u.name)?"":e)+"</div><div"+jade.attr("style","background-color:"+u.color,!0,!1)+' class="letter">'+jade.escape(null==(e=u.name.charAt(0))?"":e)+"</div></a>")}}}.call(this),n.push('</div><div class="account-admin"><div class="top"><div class="image-box"><img'+jade.attr("src","https://secure.gravatar.com/avatar/"+a+"?d=retro&r=pg&size=36",!0,!1)+' class="profile"/>'),r.isTeam&&n.push("<div"+jade.attr("style","background-color:"+r.color,!0,!1)+' class="letter">'+jade.escape(null==(e=r.name.charAt(0))?"":e)+"</div>"),n.push('</div><div class="actions"><a'+jade.attr("href",""+r.adminPath,!0,!1)+'>Admin</a><a id="logout" href="#"'+jade.attr("data-logout",""+o,!0,!1)+">Logout</a></div></div><a"+jade.attr("href",""+i,!0,!1)+' class="new-team">Create a new team</a></div></div>')}.call(this,"contextId"in r?r.contextId:"undefined"!=typeof contextId?contextId:void 0,"currentContext"in r?r.currentContext:"undefined"!=typeof currentContext?currentContext:void 0,"gravatarHash"in r?r.gravatarHash:"undefined"!=typeof gravatarHash?gravatarHash:void 0,"logoutPath"in r?r.logoutPath:"undefined"!=typeof logoutPath?logoutPath:void 0,"newTeamPath"in r?r.newTeamPath:"undefined"!=typeof newTeamPath?newTeamPath:void 0,"teams"in r?r.teams:"undefined"!=typeof teams?teams:void 0,"undefined"in r?r.undefined:void 0,"user"in r?r.user:"undefined"!=typeof user?user:void 0),n.join("")}},{}]},{},[1]);