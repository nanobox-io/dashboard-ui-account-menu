!function t(e,a,r){function n(i,s){if(!a[i]){if(!e[i]){var u="function"==typeof require&&require;if(!s&&u)return u(i,!0);if(o)return o(i,!0);var d=new Error("Cannot find module '"+i+"'");throw d.code="MODULE_NOT_FOUND",d}var c=a[i]={exports:{}};e[i][0].call(c.exports,function(t){var a=e[i][1][t];return n(a?a:t)},c,c.exports,t,e,a,r)}return a[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)n(r[i]);return n}({1:[function(t,e,a){var r,n,o,i=function(t,e){return function(){return t.apply(e,arguments)}};o=t("jade/base"),n=t("sub-menu"),r=function(){function t(t,e){this.config=e,this.addDestroyListener=i(this.addDestroyListener,this),this.parseData(),this.build(t)}return t.prototype.build=function(t){return this.$node=$(o(this.config)),t.append(this.$node),$("#profile-img").on("click",function(t){return function(e){if(null==t.subMenu)return t.buildSubMenu(),setTimeout(t.addDestroyListener,50)}}(this))},t.prototype.buildSubMenu=function(){return this.subMenu=new n(this.$node,this.config)},t.prototype.destroySubMenu=function(){return this.subMenu.destroy(),this.subMenu=null},t.prototype.addDestroyListener=function(){return $(document).on("click",function(t){return function(){return $(document).off("click"),t.destroySubMenu()}}(this))},t.prototype.parseData=function(){return this.config.gravatarHash=md5(this.config.user.email),this.setTeamColors(),this.setCurrentContext()},t.prototype.setCurrentContext=function(){var t,e,a,r,n;for(this.config.currentContext=this.config.user,a=this.config.teams,r=[],t=0,e=a.length;t<e;t++)n=a[t],n.id===this.config.contextId?(n.isTeam=!0,r.push(this.config.currentContext=n)):r.push(void 0);return r},t.prototype.setTeamColors=function(){var t,e,a,r,n,o,i;for(t=["#F07146","#F046A1","#00BACC","#00A42E","#F00000"],e=0,n=this.config.teams,o=[],a=0,r=n.length;a<r;a++)i=n[a],i.color=this.hexToRgb(t[e++],.7),e===t.length?o.push(e=0):o.push(void 0);return o},t.prototype.hexToRgb=function(t,e){var a;return a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t),"rgba("+parseInt(a[1],16)+", "+parseInt(a[2],16)+", "+parseInt(a[3],16)+", "+e+")"},t}(),window.nanobox||(window.nanobox={}),nanobox.AccountMenu=r},{"jade/base":3,"sub-menu":2}],2:[function(t,e,a){var r,n;n=t("jade/sub-menu"),e.exports=r=function(){function t(t,e){this.config=e,this.build(t)}return t.prototype.build=function(t){return this.$node=$(n(this.config)),t.append(this.$node)},t.prototype.destroy=function(){return this.$node.remove()},t}()},{"jade/sub-menu":4}],3:[function(t,e,a){e.exports=function(t){var e,a=[],r=t||{};return function(t,r){a.push('<div class="account-menu"><div id="profile-img"><img'+jade.attr("src","https://secure.gravatar.com/avatar/"+r+"?d=retro&r=pg&size=36",!0,!1)+' class="profile"/>'),t.isTeam&&a.push("<div"+jade.attr("style","background-color:"+t.color,!0,!1)+' class="letter">'+jade.escape(null==(e=t.name.charAt(0))?"":e)+"</div>"),a.push('<div class="circ-arrow"></div></div></div>')}.call(this,"currentContext"in r?r.currentContext:"undefined"!=typeof currentContext?currentContext:void 0,"gravatarHash"in r?r.gravatarHash:"undefined"!=typeof gravatarHash?gravatarHash:void 0),a.join("")}},{}],4:[function(t,e,a){e.exports=function(t){var e,a=[],r=t||{};return function(t,r,n,o,i,s,u,d){a.push('<div class="account-sub-menu"><div class="teams"><a'+jade.attr("href",""+d.appsPath,!0,!1)+jade.cls(["team",t==d.id?"active":""],[null,!0])+"><img"+jade.attr("src","https://secure.gravatar.com/avatar/"+n+"?d=retro&r=pg&size=36",!0,!1)+' class="profile"/><div class="name">'+jade.escape(null==(e=d.username)?"":e)+"</div></a>"),function(){var r=s;if("number"==typeof r.length)for(var o=0,i=r.length;o<i;o++){var u=r[o];a.push("<a"+jade.attr("href",""+u.appsPath,!0,!1)+jade.cls(["team",t==u.id?"active":""],[null,!0])+"><img"+jade.attr("src","https://secure.gravatar.com/avatar/"+n+"?d=retro&r=pg&size=36",!0,!1)+' class="profile"/><div class="name">'+jade.escape(null==(e=u.name)?"":e)+"</div><div"+jade.attr("style","background-color:"+u.color,!0,!1)+' class="letter">'+jade.escape(null==(e=u.name.charAt(0))?"":e)+"</div></a>")}else{var i=0;for(var o in r){i++;var u=r[o];a.push("<a"+jade.attr("href",""+u.appsPath,!0,!1)+jade.cls(["team",t==u.id?"active":""],[null,!0])+"><img"+jade.attr("src","https://secure.gravatar.com/avatar/"+n+"?d=retro&r=pg&size=36",!0,!1)+' class="profile"/><div class="name">'+jade.escape(null==(e=u.name)?"":e)+"</div><div"+jade.attr("style","background-color:"+u.color,!0,!1)+' class="letter">'+jade.escape(null==(e=u.name.charAt(0))?"":e)+"</div></a>")}}}.call(this),a.push('</div><div class="account-admin"><div class="top"><div class="image-box"><img'+jade.attr("src","https://secure.gravatar.com/avatar/"+n+"?d=retro&r=pg&size=36",!0,!1)+' class="profile"/>'),r.isTeam&&a.push("<div"+jade.attr("style","background-color:"+r.color,!0,!1)+' class="letter">'+jade.escape(null==(e=r.name.charAt(0))?"":e)+"</div>"),a.push('</div><div class="actions"><a'+jade.attr("href",""+r.adminPath,!0,!1)+">Admin</a><a"+jade.attr("href",""+o,!0,!1)+">Logout</a></div></div><a"+jade.attr("href",""+i,!0,!1)+' class="new-team">Create a new team</a></div></div>')}.call(this,"contextId"in r?r.contextId:"undefined"!=typeof contextId?contextId:void 0,"currentContext"in r?r.currentContext:"undefined"!=typeof currentContext?currentContext:void 0,"gravatarHash"in r?r.gravatarHash:"undefined"!=typeof gravatarHash?gravatarHash:void 0,"logoutPath"in r?r.logoutPath:"undefined"!=typeof logoutPath?logoutPath:void 0,"newTeamPath"in r?r.newTeamPath:"undefined"!=typeof newTeamPath?newTeamPath:void 0,"teams"in r?r.teams:"undefined"!=typeof teams?teams:void 0,"undefined"in r?r.undefined:void 0,"user"in r?r.user:"undefined"!=typeof user?user:void 0),a.join("")}},{}]},{},[1]);